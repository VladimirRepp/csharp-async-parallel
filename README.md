# C#: Асинхронное и параллельное программирование

[![.NET](https://img.shields.io/badge/.NET-9.0-512BD4?logo=dotnet)](https://dotnet.microsoft.com/)
[![C#](https://img.shields.io/badge/C%23-10.0-239120?logo=c-sharp)](https://docs.microsoft.com/ru-ru/dotnet/csharp/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

Учебный репозиторий с практическими материалами по продвинутым темам C#: работа с унаследованным кодом, управление процессами, многопоточность, асинхронное программирование, синхронизация, параллельные вычисления и динамическая загрузка библиотек.

## Содержание курса

### [Модуль 1. Использование унаследованного программного кода](./Module%201%20-%20Legacy%20Code)

**Унаследованный код (Legacy Code)** — код без тестов и документации с жесткими зависимостями и нарушением принципов SOLID.

**Ключевые подходы:**
- **Анализ** — изучение кода без изменений
- **Рефакторинг** — улучшение структуры без изменения поведения
- **Обеспечение тестируемости** — основа для безопасных изменений
- **Методы работы:**
  - **Sprout Method/Class** — добавление нового функционала в чистые методы
  - **Wrap Method** — оборачивание старых методов для добавления функциональности

### [Модуль 2. Процессы](./Module%202%20-%20Processes)

**Процесс** — экземпляр выполняемой программы с изолированным окружением.

**Основные сценарии:**
- Запуск внешних приложений
- Мониторинг системных процессов
- Взаимодействие с процессами (ввод/вывод)
- Ожидание завершения процессов

**Ключевой класс:** `System.Diagnostics.Process`

### [Модуль 3. Многопоточность и асинхронность](./Module%203%20-%20Threading%20and%20Asynchrony)

**Поток (Thread)** — наименьшая единица выполнения внутри процесса.

**Асинхронность** — освобождение потока во время операций ввода-вывода.

**Ключевые концепции:**
- `Thread`, `ThreadPool` — управление потоками
- `Task`, `Task<T>` — современная абстракция для асинхронных операций
- `async/await` — упрощение асинхронного кода
- **I/O-bound vs CPU-bound операции:**
  - **I/O-bound** (сеть, диск, БД) — идеально для `async/await`
  - **CPU-bound** (вычисления) — лучше использовать `Task.Run`

### [Модуль 4. Синхронизация](./Module%204%20-%20Synchronization)

**Проблемы многопоточности:**
- **Race Condition** — состояние гонки
- **Deadlock** — взаимная блокировка
- **Data Corruption** — порча данных

**Примитивы синхронизации:**
- `lock` (`Monitor`) — эксклюзивная блокировка
- `Mutex` — межпроцессная блокировка
- `SemaphoreSlim` — ограничение одновременного доступа
- `ManualResetEventSlim` / `AutoResetEvent` — уведомления между потоками
- `ReaderWriterLockSlim` — множественное чтение, эксклюзивная запись

**Важные правила:**
- Минимизируйте объем кода в критических секциях
- Используйте неизменяемые структуры
- Никогда не блокируйте поток в `async` методе (кроме `await`)

### [Модуль 5. Параллельное программирование](./Module%205%20-%20Parallel%20Programming)

**Параллельное программирование** — использование нескольких ядер CPU для одновременного выполнения задач.

**Ключевые технологии:**
- **Parallel класс** — `For`, `ForEach`, `Invoke`
- **PLINQ** — `AsParallel()` для LINQ-запросов
- **TPL (Task Parallel Library)** — `Task`, `Task<T>`, `TaskFactory`

**Отличие от многопоточности:**
- **Многопоточность** — асинхронность и освобождение потоков при I/O
- **Параллелизм** — использование нескольких ядер для CPU-bound задач

**Концепции:**
- Степень параллелизма
- Разделение данных между потоками
- Агрегация результатов

### [Модуль 6. Динамически подключаемые библиотеки](./Module%206%20-%20Dynamic%20Libraries)

**Динамическая загрузка** — загрузка сборок во время выполнения.

**Ключевые классы:**
- `Assembly` — загруженная сборка
- `Type` — представление типа
- `Activator` — создание экземпляров
- `MethodInfo` — информация о методах

**Сценарии использования:**
- Плагинная архитектура
- Загрузка реализаций по конфигурации
- "Горячая" замена модулей

## Быстрый старт

### Предварительные требования
- [.NET 9.0 SDK](https://dotnet.microsoft.com/download/dotnet/6.0) или новее
- IDE: [Visual Studio 2022](https://visualstudio.microsoft.com/), [Rider](https://www.jetbrains.com/rider/) или [VS Code](https://code.visualstudio.com/)

### Запуск примеров
- здесь приведены примеры кода для решения задач
- задачи описаны в исходном файле кода
- для запуска кода потребуется создать новый проект в IDE или редакторе кода с .Net 

### Заметки по выпуску
- Module 6 не закончен (Sample_1 в работе, планиурется еще 3 примера)
